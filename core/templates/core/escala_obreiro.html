{% extends "core/base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="text-center mb-4">🕊️ Escala de Cultos</h2>

  {% if escalas %}
  {% for escala in escalas %}
  <div class="card shadow-lg mb-4" style="background: rgba(0, 0, 0, 0.6); color: #fff;">
    <div class="card-body">
      <h5 class="card-title text-warning">
        📅 {{ escala.data|date:"d/m/Y" }} — {{ escala.culto }}
      </h5>

      {% if escala.local %}
      <p class="mb-2"><strong>📍 Local:</strong> {{ escala.local }}</p>
      {% endif %}

      {% if escala.tarefa %}
      <p><strong>🎯 Tema / Observação:</strong> {{ escala.tarefa }}</p>
      {% endif %}

      <hr style="border-color: #ffd700; opacity: 0.6;">

      <h6 class="text-warning">👥 Obreiros Escalados:</h6>
      <ul class="list-unstyled mb-0">
        {% for escala_obreiro in escala.escalaobreiro_set.all %}
          <li style="margin-bottom: 6px;">
            <strong>{{ escala_obreiro.obreiro.nome }}</strong>
            {% if escala_obreiro.obreiro.cargo %}
              — {{ escala_obreiro.obreiro.cargo }}
            {% endif %}
            {% if escala_obreiro.funcao %}
              <span style="color: #ffd700;">({{ escala_obreiro.funcao }})</span>
            {% endif %}
          </li>
        {% empty %}
          <li class="text-muted">Nenhum obreiro escalado ainda.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endfor %}
  {% else %}
  <p class="text-center text-muted">Nenhuma escala cadastrada no momento.</p>
  {% endif %}
</div>
{% endblock %}
