{% extends "core/base.html" %}
{% load humanize %}
{% block content %}
<h3 class="mb-3">ðŸ’° Financeiro (Acesso Restrito)</h3>

<div class="row g-3 mb-4">
  <div class="col-md-2 col-6">
    <div class="card text-center p-3 shadow-sm">
      DÃ­zimos<br><b>R$ {{ dizimos|floatformat:2 }}</b>
    </div>
  </div>
  <div class="col-md-2 col-6">
    <div class="card text-center p-3 shadow-sm">
      Ofertas<br><b>R$ {{ ofertas|floatformat:2 }}</b>
    </div>
  </div>
  <div class="col-md-2 col-6">
    <div class="card text-center p-3 shadow-sm">
      Outros<br><b>R$ {{ outros|floatformat:2 }}</b>
    </div>
  </div>
  <div class="col-md-2 col-6">
    <div class="card text-center p-3 shadow-sm">
      Despesas<br><b>R$ {{ despesas|floatformat:2 }}</b>
    </div>
  </div>
  <div class="col-md-4 col-12">
    <div class="card text-center p-3 shadow-sm bg-success text-white">
      Saldo Atual<br><b>R$ {{ saldo_atual|floatformat:2 }}</b>
    </div>
  </div>
</div>

<div class="card p-3 shadow-sm">
  <h5 class="mb-3">ðŸ“Š EvoluÃ§Ã£o Mensal (Ãšltimos 12 Meses)</h5>
  <canvas id="bar12"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
const ctx = document.getElementById('bar12').getContext('2d');
new Chart(ctx, {
  type: 'bar',
  data: {
    labels: {{ labels|safe }},
    datasets: [
      {
        label: 'ContribuiÃ§Ãµes',
        data: {{ contrib_series|safe }},
        backgroundColor: 'rgba(25, 135, 84, 0.7)',
        borderColor: '#198754',
        borderWidth: 1
      },
      {
        label: 'Despesas',
        data: {{ desp_series|safe }},
        backgroundColor: 'rgba(220, 53, 69, 0.7)',
        borderColor: '#dc3545',
        borderWidth: 1
      }
    ]
  },
  options: {
    responsive: true,
    scales: { y: { beginAtZero: true } }
  }
});
</script>
{% endblock %}
