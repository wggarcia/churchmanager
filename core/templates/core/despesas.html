{% extends 'base.html' %}
{% block content %}
<h3 class="text-center mb-4">ðŸ’¸ Despesas</h3>

<div class="card p-3 mb-3">
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="row g-3">
      <div class="col-md-4"><input name="descricao" class="form-control" placeholder="DescriÃ§Ã£o da Despesa"></div>
      <div class="col-md-2"><input name="valor" type="number" step="0.01" class="form-control" placeholder="Valor"></div>
      <div class="col-md-3"><input name="data" type="date" class="form-control"></div>
      <div class="col-md-3"><input name="recibo" type="file" class="form-control"></div>
      <div class="col-md-12"><button class="btn btn-success w-100">Salvar</button></div>
    </div>
  </form>
</div>

<table class="table table-striped">
  <thead><tr><th>Data</th><th>DescriÃ§Ã£o</th><th>Valor</th><th>Recibo</th></tr></thead>
  <tbody>
    {% for d in despesas %}
    <tr>
      <td>{{ d.data|date:"d/m/Y" }}</td>
      <td>{{ d.descricao }}</td>
      <td>R$ {{ d.valor|floatformat:2 }}</td>
      <td>
        {% if d.recibo %}
        <a href="{{ d.recibo.url }}" target="_blank" class="btn btn-outline-primary btn-sm">ðŸ“Ž Ver Recibo</a>
        {% else %}-{% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center">Nenhuma despesa registrada.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
